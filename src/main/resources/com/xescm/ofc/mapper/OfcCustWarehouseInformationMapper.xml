<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.xescm.ofc.mapper.OfcCustWarehouseInformationMapper" >
  <resultMap id="BaseResultMap" type="com.xescm.ofc.domain.OfcCustWarehouseInformation" >
    <!--
      WARNING - @mbg.generated
    -->
    <id column="order_code" property="orderCode" jdbcType="VARCHAR" />
    <result column="support_name" property="supportName" jdbcType="VARCHAR" />
    <result column="support_code" property="supportCode" jdbcType="VARCHAR" />
    <result column="provide_transport" property="provideTransport" jdbcType="INTEGER" />
    <result column="shipment_time" property="shipmentTime" jdbcType="TIMESTAMP" />
    <result column="arrive_time" property="arriveTime" jdbcType="TIMESTAMP" />
    <result column="warehouse_name" property="warehouseName" jdbcType="VARCHAR" />
    <result column="plate_number" property="plateNumber" jdbcType="VARCHAR" />
    <result column="driver_name" property="driverName" jdbcType="VARCHAR" />
    <result column="contact_number" property="contactNumber" jdbcType="VARCHAR" />
    <result column="creation_time" property="creationTime" jdbcType="TIMESTAMP" />
    <result column="creator" property="creator" jdbcType="VARCHAR" />
    <result column="operator" property="operator" jdbcType="VARCHAR" />
    <result column="oper_time" property="operTime" jdbcType="TIMESTAMP" />
    <result column="warehouse_code" property="warehouseCode" jdbcType="VARCHAR" />
  </resultMap>
  <sql id="resultField">
    ofw.support_name supportName,
    ofw.support_code supportCode,
    ofw.provide_transport provideTransport,
    ofw.shipment_time shipmentTime,
    ofw.arrive_time arriveTime,
    ofw.warehouse_name warehouseName,
    ofw.plate_number plateNumber,
    ofw.driver_name driverName,
    ofw.contact_number contactNumber,
    ofw.creation_time creationTime,
    ofw.creator creator,
    ofw.operator operator,
    ofw.oper_time operTime,
    ofw.warehouse_code warehouseCode
  </sql>
    <select id="queryByInfo" resultType="com.xescm.ofc.domain.OfcCustWarehouseInformation">
      SELECT * FROM
      (
      SELECT <include refid="resultField"/> FROM ofc_warehouse_information ofw
      <where>
        <if test="orderCode!=null and orderCode!=''">
          ofw.order_code =#{orderCode}
        </if>
      </where>
      UNION
      SELECT <include refid="resultField"/> FROM ofc_cust_warehouse_information ofw
      <where>
        <if test="orderCode!=null and orderCode!=''">
          ofw.order_code =#{orderCode}
        </if>
      </where>
      ) temp
      ORDER BY temp.operTime DESC limit 1
    </select>
</mapper>